<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"><title>è§†é¢‘æ’­æ”¾å™¨</title><link rel="stylesheet" href="https://fonts.loli.net/icon?family=Material+Icons"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#6366f1;--primary-dark:#4f46e5;--on-primary:#ffffff;--surface:#ffffff;--on-surface:#1e293b;--surface-variant:#f1f5f9;--on-surface-variant:#64748b;--background:#f8fafc;--shadow-md:0 4px 6px -1px rgba(0,0,0,0.1);--shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1);--radius-md:0.5rem;--radius-lg:0.75rem;--transition:250ms cubic-bezier(0.4,0,0.2,1)}@media (prefers-color-scheme:dark){:root{--primary:#818cf8;--primary-dark:#6366f1;--on-primary:#0f172a;--surface:#1e293b;--on-surface:#f1f5f9;--surface-variant:#334155;--on-surface-variant:#cbd5e1;--background:#0f172a}}body{font-family:'Roboto',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--background);color:var(--on-surface);line-height:1.6;-webkit-tap-highlight-color:transparent}.container{max-width:64rem;margin:0 auto;padding:1.5rem}.header{display:flex;align-items:center;gap:1rem;margin-bottom:2rem}.header h1{font-size:1.5rem;font-weight:600;flex:1}.icon-button{background:none;border:none;color:var(--on-surface);cursor:pointer;padding:0.5rem;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;transition:all var(--transition);min-width:44px;min-height:44px}.icon-button:hover{background:var(--surface-variant)}.card{background:var(--surface);border-radius:var(--radius-lg);padding:1.5rem;box-shadow:var(--shadow-md);margin-bottom:1rem;transition:all var(--transition)}.input-group{display:flex;gap:0.75rem;margin-bottom:1rem}.search-input{flex:1;padding:0.75rem 1rem;border:2px solid var(--surface-variant);border-radius:var(--radius-lg);background:var(--surface);color:var(--on-surface);font-size:1rem;transition:all var(--transition)}.search-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.1)}.button{background:var(--primary);color:var(--on-primary);border:none;border-radius:var(--radius-lg);padding:0.75rem 1.5rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all var(--transition);display:flex;align-items:center;gap:0.5rem;min-height:44px;white-space:nowrap}.button:hover{background:var(--primary-dark);box-shadow:var(--shadow-md)}.button:disabled{opacity:0.5;cursor:not-allowed}.video-player{width:100%;aspect-ratio:16/9;background:#000;border-radius:var(--radius-lg);overflow:hidden;margin-bottom:1.5rem;box-shadow:var(--shadow-lg);position:relative}video{width:100%;height:100%;display:block}.video-info h2{font-size:1.25rem;font-weight:600;margin-bottom:0.5rem}.video-info p{color:var(--on-surface-variant);font-size:0.875rem}.controls-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:0.75rem;margin-top:1rem}.control-btn{padding:0.75rem;border:2px solid var(--surface-variant);background:var(--surface);color:var(--on-surface);border-radius:var(--radius-lg);cursor:pointer;font-size:0.875rem;font-weight:500;transition:all var(--transition);display:flex;align-items:center;justify-content:center;gap:0.5rem}.control-btn:hover{border-color:var(--primary);color:var(--primary)}.control-btn.primary{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);color:var(--on-primary);border-color:transparent}.progress-bar{width:100%;height:4px;background:var(--surface-variant);border-radius:2px;overflow:hidden;margin-top:1rem}.progress-fill{height:100%;background:var(--primary);transition:width 0.3s ease;width:0%}.snackbar{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%) translateY(100px);background:var(--surface);color:var(--on-surface);padding:1rem 1.5rem;border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);transition:transform var(--transition);z-index:2000;max-width:calc(100% - 2rem)}.snackbar.show{transform:translateX(-50%) translateY(0)}.snackbar.error{background:#ef4444;color:white}.snackbar.success{background:#10b981;color:white}.info-text{font-size:0.75rem;color:var(--on-surface-variant);margin-top:0.5rem}.hidden{display:none !important}.loading-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;flex-direction:column;align-items:center;justify-content:center;color:white;gap:1rem}.spinner{width:40px;height:40px;border:4px solid rgba(255,255,255,0.3);border-top-color:white;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}@media (max-width:768px){.container{padding:1rem}.header h1{font-size:1.25rem}.input-group{flex-direction:column}.controls-grid{grid-template-columns:1fr}.card{padding:1rem}}</style><script src="https://cdn.jsdmirror.com/npm/hls.js@latest"></script></head><body><div class="container"><div class="header"><h1><span class="material-icons" style="font-size: 1.75rem; color: var(--primary);">play_circle_filled</span>è§†é¢‘æ’­æ”¾å™¨</h1></div><div class="card"><h3 style="margin-bottom: 1rem; font-size: 1rem;">ğŸ“º åŠ è½½è§†é¢‘</h3><div class="input-group"><input type="text" class="search-input" id="videoUrl" placeholder="è¾“å…¥è§†é¢‘åœ°å€æˆ–ä½¿ç”¨ #url=..."><button class="button" onclick="app.loadVideo()">åŠ è½½</button></div><div class="info-text">ğŸ’¡ æ”¯æŒ MP4ã€WebMã€HLS(.m3u8) ç­‰æ ¼å¼ | æˆ–ä½¿ç”¨ #url=åœ°å€ è‡ªåŠ¨åŠ è½½</div><div id="progressBar" class="progress-bar hidden"><div id="progressFill" class="progress-fill"></div></div></div><div class="video-player" id="videoWrapper"><video id="videoPlayer" controls playsinline crossorigin="anonymous"></video><div id="loadingOverlay" class="loading-overlay hidden"><div class="spinner"></div><div id="loadingText">åŠ è½½ä¸­...</div></div></div><div class="card"><div class="video-info"><h2 id="videoTitle">å‡†å¤‡å°±ç»ª</h2><p id="videoInfo">è¾“å…¥è§†é¢‘åœ°å€å¼€å§‹æ’­æ”¾</p></div><div class="controls-grid"><button class="control-btn primary" onclick="app.toggleFullscreen()"><span class="material-icons">fullscreen</span>å…¨å±</button><button class="control-btn" onclick="app.togglePictureInPicture()"><span class="material-icons">picture_in_picture_alt</span>ç”»ä¸­ç”»</button><button class="control-btn" onclick="app.adjustPlaybackRate(0.5)"><span class="material-icons">slow_motion_video</span>0.5x</button><button class="control-btn" onclick="app.adjustPlaybackRate(1)"><span class="material-icons">play_arrow</span>1x</button><button class="control-btn" onclick="app.adjustPlaybackRate(1.5)"><span class="material-icons">fast_forward</span>1.5x</button><button class="control-btn" onclick="app.adjustPlaybackRate(2)"><span class="material-icons">fast_forward</span>2x</button></div></div></div><div id="snackbar" class="snackbar"></div><script>const app={video:null,videoUrl:null,hlsInstance:null,videoWrapper:null,blobUrls:new Set,init(){this.video=document.getElementById("videoPlayer"),this.videoUrl=document.getElementById("videoUrl"),this.videoWrapper=document.getElementById("videoWrapper"),this.loadVideoFromHash(),window.addEventListener("hashchange",(()=>this.loadVideoFromHash())),document.addEventListener("keydown",(e=>{"f"!==e.key&&"F"!==e.key||(e.preventDefault(),this.toggleFullscreen())," "===e.key&&"INPUT"!==e.target.tagName&&(e.preventDefault(),this.video.paused?this.video.play():this.video.pause())})),this.video.addEventListener("loadedmetadata",(()=>{const e=this.formatTime(this.video.duration);document.getElementById("videoInfo").textContent=`æ—¶é•¿: ${e} | åˆ†è¾¨ç‡: ${this.video.videoWidth}x${this.video.videoHeight}`})),this.video.addEventListener("error",(e=>{this.hideLoading();const t=this.video.error;let i="æ’­æ”¾é”™è¯¯";if(t)switch(t.code){case 1:i="è§†é¢‘åŠ è½½è¢«ä¸­æ­¢";break;case 2:i="ç½‘ç»œé”™è¯¯";break;case 3:i="è§£ç é”™è¯¯";break;case 4:i="è§†é¢‘æ ¼å¼ä¸æ”¯æŒ"}this.showSnackbar(i,"error")}))},loadVideoFromHash(){const e=window.location.hash.substring(1),t=new URLSearchParams(e).get("url");t&&(this.videoUrl.value=decodeURIComponent(t),this.loadVideo())},async loadVideo(){const e=this.videoUrl.value.trim();if(e){this.cleanup(),this.showLoading("æ­£åœ¨åŠ è½½è§†é¢‘...");try{e.toLowerCase().includes(".m3u8")?await this.loadHLS(e):await this.loadNormalVideo(e)}catch(e){this.hideLoading(),this.showSnackbar("åŠ è½½å¤±è´¥: "+e.message,"error")}}else this.showSnackbar("è¯·è¾“å…¥è§†é¢‘åœ°å€","error")},async loadNormalVideo(e){this.video.src=e;const t=this.getFileExtension(e);document.getElementById("videoTitle").textContent=`${t.toUpperCase()} è§†é¢‘`;try{await this.video.play(),this.hideLoading()}catch(e){if(this.hideLoading(),"NotAllowedError"!==e.name)throw e;this.showSnackbar("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œè¯·ç‚¹å‡»æ’­æ”¾æŒ‰é’®","error")}},async loadHLS(e){if(Hls.isSupported())this.hlsInstance=new Hls({debug:!1,enableWorker:!0,lowLatencyMode:!1,backBufferLength:90}),this.hlsInstance.loadSource(e),this.hlsInstance.attachMedia(this.video),this.hlsInstance.on(Hls.Events.MANIFEST_PARSED,(async(e,t)=>{document.getElementById("videoTitle").textContent="HLS æµåª’ä½“";const i=t.levels.length;document.getElementById("videoInfo").textContent=`${i} ä¸ªè´¨é‡ç­‰çº§å¯ç”¨`;try{await this.video.play(),this.hideLoading()}catch(e){this.hideLoading(),"NotAllowedError"===e.name&&this.showSnackbar("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œè¯·ç‚¹å‡»æ’­æ”¾","error")}})),this.hlsInstance.on(Hls.Events.ERROR,((e,t)=>{if(console.error("HLS Error:",t),t.fatal)switch(this.hideLoading(),t.type){case Hls.ErrorTypes.NETWORK_ERROR:this.showSnackbar("ç½‘ç»œé”™è¯¯ï¼Œæ­£åœ¨å°è¯•æ¢å¤...","error"),this.hlsInstance.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:this.showSnackbar("åª’ä½“é”™è¯¯ï¼Œæ­£åœ¨å°è¯•æ¢å¤...","error"),this.hlsInstance.recoverMediaError();break;default:this.showSnackbar("æ— æ³•æ’­æ”¾æ­¤è§†é¢‘","error")}}));else if(this.video.canPlayType("application/vnd.apple.mpegurl")){this.video.src=e,document.getElementById("videoTitle").textContent="HLS æµåª’ä½“";try{await this.video.play(),this.hideLoading()}catch(e){this.hideLoading(),"NotAllowedError"===e.name&&this.showSnackbar("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢","error")}}else this.hideLoading(),this.showSnackbar("æµè§ˆå™¨ä¸æ”¯æŒ HLS æ’­æ”¾","error")},toggleFullscreen(){document.fullscreenElement?document.exitFullscreen():this.videoWrapper.requestFullscreen().catch((e=>{this.showSnackbar("æ— æ³•è¿›å…¥å…¨å±æ¨¡å¼","error")}))},async togglePictureInPicture(){try{document.pictureInPictureElement?await document.exitPictureInPicture():(await this.video.requestPictureInPicture(),this.showSnackbar("å·²è¿›å…¥ç”»ä¸­ç”»æ¨¡å¼","success"))}catch(e){this.showSnackbar("ç”»ä¸­ç”»æ¨¡å¼ä¸å¯ç”¨","error")}},adjustPlaybackRate(e){this.video.playbackRate=e,this.showSnackbar(`æ’­æ”¾é€Ÿåº¦: ${e}x`,"success")},cleanup(){this.hlsInstance&&(this.hlsInstance.destroy(),this.hlsInstance=null),this.blobUrls.forEach((e=>URL.revokeObjectURL(e))),this.blobUrls.clear(),this.video.src="",this.video.load()},showLoading(e){const t=document.getElementById("loadingOverlay");document.getElementById("loadingText").textContent=e,t.classList.remove("hidden")},hideLoading(){document.getElementById("loadingOverlay").classList.add("hidden")},showSnackbar(e,t=""){const i=document.getElementById("snackbar");i.textContent=e,i.className="snackbar "+t+" show",setTimeout((()=>{i.classList.remove("show")}),3e3)},getFileExtension(e){const t=e.split(".");return t.length>1?t[t.length-1].split("?")[0]:"video"},formatTime(e){if(isNaN(e))return"00:00";const t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60);return t>0?`${t}:${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${i}:${String(o).padStart(2,"0")}`}};window.addEventListener("load",(()=>app.init()));</script></body></html>