<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"><title>è§†é¢‘æ’­æ”¾å™¨</title><link rel="stylesheet" href="https://fonts.loli.net/icon?family=Material+Icons"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#6366f1;--primary-dark:#4f46e5;--on-primary:#ffffff;--surface:#ffffff;--on-surface:#1e293b;--surface-variant:#f1f5f9;--on-surface-variant:#64748b;--background:#f8fafc;--shadow-md:0 4px 6px -1px rgba(0,0,0,0.1);--shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1);--radius-md:0.5rem;--radius-lg:0.75rem;--transition:250ms cubic-bezier(0.4,0,0.2,1)}@media (prefers-color-scheme:dark){:root{--primary:#818cf8;--primary-dark:#6366f1;--on-primary:#0f172a;--surface:#1e293b;--on-surface:#f1f5f9;--surface-variant:#334155;--on-surface-variant:#cbd5e1;--background:#0f172a}}body{font-family:'Roboto',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--background);color:var(--on-surface);line-height:1.6;-webkit-tap-highlight-color:transparent}.container{max-width:64rem;margin:0 auto;padding:1.5rem}.header{display:flex;align-items:center;gap:1rem;margin-bottom:2rem}.header h1{font-size:1.5rem;font-weight:600;flex:1}.card{background:var(--surface);border-radius:var(--radius-lg);padding:1.5rem;box-shadow:var(--shadow-md);margin-bottom:1rem;transition:all var(--transition)}.input-group{display:flex;gap:0.75rem;margin-bottom:1rem}.search-input{flex:1;padding:0.75rem 1rem;border:2px solid var(--surface-variant);border-radius:var(--radius-lg);background:var(--surface);color:var(--on-surface);font-size:1rem;transition:all var(--transition)}.search-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.1)}.button{background:var(--primary);color:var(--on-primary);border:none;border-radius:var(--radius-lg);padding:0.75rem 1.5rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all var(--transition);display:flex;align-items:center;gap:0.5rem;min-height:44px;white-space:nowrap}.button:hover{background:var(--primary-dark);box-shadow:var(--shadow-md)}.button:disabled{opacity:0.5;cursor:not-allowed}.video-wrapper{width:100%;aspect-ratio:16/9;background:#000;border-radius:var(--radius-lg);overflow:hidden;margin-bottom:1.5rem;box-shadow:var(--shadow-lg);position:relative}.video-wrapper.webpage-fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;max-width:100vw;z-index:9999;border-radius:0;margin:0;aspect-ratio:auto}video{width:100%;height:100%;display:block}.video-info h2{font-size:1.25rem;font-weight:600;margin-bottom:0.5rem}.video-info p{color:var(--on-surface-variant);font-size:0.875rem}.controls-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:0.75rem;margin-top:1rem}.control-btn{padding:0.75rem;border:2px solid var(--surface-variant);background:var(--surface);color:var(--on-surface);border-radius:var(--radius-lg);cursor:pointer;font-size:0.875rem;font-weight:500;transition:all var(--transition);display:flex;align-items:center;justify-content:center;gap:0.5rem}.control-btn:hover{border-color:var(--primary);color:var(--primary)}.control-btn.primary{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);color:var(--on-primary);border-color:transparent}.snackbar{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%) translateY(100px);background:var(--surface);color:var(--on-surface);padding:1rem 1.5rem;border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);transition:transform var(--transition);z-index:10000;max-width:calc(100% - 2rem)}.snackbar.show{transform:translateX(-50%) translateY(0)}.snackbar.error{background:#ef4444;color:white}.snackbar.success{background:#10b981;color:white}.info-text{font-size:0.75rem;color:var(--on-surface-variant);margin-top:0.5rem}.hidden{display:none !important}.loading-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;flex-direction:column;align-items:center;justify-content:center;color:white;gap:1rem;z-index:100}.spinner{width:40px;height:40px;border:4px solid rgba(255,255,255,0.3);border-top-color:white;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}@media (max-width:768px){.container{padding:1rem}.header h1{font-size:1.25rem}.input-group{flex-direction:column}.controls-grid{grid-template-columns:1fr}.card{padding:1rem}}</style><script src="https://cdn.jsdmirror.com/npm/hls.js@latest"></script></head><body><div class="container"><div class="header"><h1><span class="material-icons" style="font-size: 1.75rem; color: var(--primary);">play_circle_filled</span>è§†é¢‘æ’­æ”¾å™¨</h1></div><div class="card"><h3 style="margin-bottom: 1rem; font-size: 1rem;">ğŸ“º åŠ è½½è§†é¢‘</h3><div class="input-group"><input type="text" class="search-input" id="videoUrl" placeholder="è¾“å…¥è§†é¢‘åœ°å€æˆ–ä½¿ç”¨ #url=..."><button class="button" onclick="app.loadVideo()">åŠ è½½</button></div><div class="info-text">ğŸ’¡ æ”¯æŒ MP4ã€WebMã€HLS(.m3u8) ç­‰æ ¼å¼ | æˆ–ä½¿ç”¨ #url=åœ°å€ è‡ªåŠ¨åŠ è½½</div><div id="progressBar" class="progress-bar hidden"><div id="progressFill" class="progress-fill"></div></div></div><div class="video-wrapper" id="videoWrapper"><video id="videoPlayer" controls playsinline crossorigin="anonymous"></video><div id="loadingOverlay" class="loading-overlay hidden"><div class="spinner"></div><div id="loadingText">åŠ è½½ä¸­...</div></div></div><div class="card"><div class="video-info"><h2 id="videoTitle">å‡†å¤‡å°±ç»ª</h2><p id="videoInfo">è¾“å…¥è§†é¢‘åœ°å€å¼€å§‹æ’­æ”¾</p></div><div class="controls-grid"><button class="control-btn primary" onclick="app.toggleWebpageFullscreen()"><span class="material-icons">fullscreen</span>ç½‘é¡µå…¨å±</button><button class="control-btn" onclick="app.toggleNativeFullscreen()"><span class="material-icons">fullscreen_exit</span>åŸç”Ÿå…¨å±</button><button class="control-btn" onclick="app.toggleForcedLandscape()"><span class="material-icons">landscape</span>å¼ºåˆ¶æ¨ªå±</button><button class="control-btn" onclick="app.toggleForcedPortrait()"><span class="material-icons">portrait</span>å¼ºåˆ¶ç«–å±</button><button class="control-btn" onclick="app.adjustPlaybackRate(0.5)"><span class="material-icons">slow_motion_video</span>0.5x</button><button class="control-btn" onclick="app.adjustPlaybackRate(1)"><span class="material-icons">play_arrow</span>1x</button><button class="control-btn" onclick="app.adjustPlaybackRate(1.5)"><span class="material-icons">fast_forward</span>1.5x</button><button class="control-btn" onclick="app.adjustPlaybackRate(2)"><span class="material-icons">fast_forwardconst app={video:null,videoUrl:null,hlsInstance:null,videoWrapper:null,blobUrls:new Set,isWebpageFullscreen:!1,isForcedLandscape:!1,isForcedPortrait:!1,init(){this.video=document.getElementById("videoPlayer"),this.videoUrl=document.getElementById("videoUrl"),this.videoWrapper=document.getElementById("videoWrapper"),this.loadVideoFromHash(),window.addEventListener("hashchange",(()=>this.loadVideoFromHash())),document.addEventListener("keydown",(e=>{"f"!==e.key&&"F"!==e.key||(e.preventDefault(),this.toggleWebpageFullscreen())," "===e.key&&"INPUT"!==e.target.tagName&&(e.preventDefault(),this.video.paused?this.video.play():this.video.pause()),"Escape"===e.key&&(this.isWebpageFullscreen&&(e.preventDefault(),this.exitWebpageFullscreen()),document.fullscreenElement&&(e.preventDefault(),this.exitNativeFullscreen())),"l"!==e.key&&"L"!==e.key||(e.preventDefault(),this.toggleForcedLandscape()),"p"!==e.key&&"P"!==e.key||(e.preventDefault(),this.toggleForcedPortrait())})),this.video.addEventListener("loadedmetadata",(()=>{const e=this.formatTime(this.video.duration);document.getElementById("videoInfo").textContent=`æ—¶é•¿: ${e} | åˆ†è¾¨ç‡: ${this.video.videoWidth}x${this.video.videoHeight}`})),this.video.addEventListener("error",(e=>{this.hideLoading();const t=this.video.error;let s="æ’­æ”¾é”™è¯¯";if(t)switch(t.code){case 1:s="è§†é¢‘åŠ è½½è¢«ä¸­æ­¢";break;case 2:s="ç½‘ç»œé”™è¯¯";break;case 3:s="è§£ç é”™è¯¯";break;case 4:s="è§†é¢‘æ ¼å¼ä¸æ”¯æŒ"}this.showSnackbar(s,"error")})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||this.showSnackbar("å·²é€€å‡ºåŸç”Ÿå…¨å±æ¨¡å¼","success")}))},loadVideoFromHash(){const e=window.location.hash.substring(1),t=new URLSearchParams(e).get("url");t&&(this.videoUrl.value=decodeURIComponent(t),this.loadVideo())},async loadVideo(){const e=this.videoUrl.value.trim();if(e){this.cleanup(),this.showLoading("æ­£åœ¨åŠ è½½è§†é¢‘...");try{e.toLowerCase().includes(".m3u8")?await this.loadHLS(e):await this.loadNormalVideo(e)}catch(e){this.hideLoading(),this.showSnackbar("åŠ è½½å¤±è´¥: "+e.message,"error")}}else this.showSnackbar("è¯·è¾“å…¥è§†é¢‘åœ°å€","error")},async loadNormalVideo(e){this.video.src=e;const t=this.getFileExtension(e);document.getElementById("videoTitle").textContent=`${t.toUpperCase()} è§†é¢‘`;try{await this.video.play(),this.hideLoading()}catch(e){if(this.hideLoading(),"NotAllowedError"!==e.name)throw e;this.showSnackbar("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œè¯·ç‚¹å‡»æ’­æ”¾æŒ‰é’®","error")}},async loadHLS(e){if(Hls.isSupported())this.hlsInstance=new Hls({debug:!1,enableWorker:!0,lowLatencyMode:!1,backBufferLength:90}),this.hlsInstance.loadSource(e),this.hlsInstance.attachMedia(this.video),this.hlsInstance.on(Hls.Events.MANIFEST_PARSED,(async(e,t)=>{document.getElementById("videoTitle").textContent="HLS æµåª’ä½“";const s=t.levels.length;document.getElementById("videoInfo").textContent=`${s} ä¸ªè´¨é‡ç­‰çº§å¯ç”¨`;try{await this.video.play(),this.hideLoading()}catch(e){this.hideLoading(),"NotAllowedError"===e.name&&this.showSnackbar("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œè¯·ç‚¹å‡»æ’­æ”¾","error")}})),this.hlsInstance.on(Hls.Events.ERROR,((e,t)=>{if(console.error("HLS Error:",t),t.fatal)switch(this.hideLoading(),t.type){case Hls.ErrorTypes.NETWORK_ERROR:this.showSnackbar("ç½‘ç»œé”™è¯¯ï¼Œæ­£åœ¨å°è¯•æ¢å¤...","error"),this.hlsInstance.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:this.showSnackbar("åª’ä½“é”™è¯¯ï¼Œæ­£åœ¨å°è¯•æ¢å¤...","error"),this.hlsInstance.recoverMediaError();break;default:this.showSnackbar("æ— æ³•æ’­æ”¾æ­¤è§†é¢‘","error")}}));else if(this.video.canPlayType("application/vnd.apple.mpegurl")){this.video.src=e,document.getElementById("videoTitle").textContent="HLS æµåª’ä½“";try{await this.video.play(),this.hideLoading()}catch(e){this.hideLoading(),"NotAllowedError"===e.name&&this.showSnackbar("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢","error")}}else this.hideLoading(),this.showSnackbar("æµè§ˆå™¨ä¸æ”¯æŒ HLS æ’­æ”¾","error")},toggleWebpageFullscreen(){this.isWebpageFullscreen?this.exitWebpageFullscreen():this.enterWebpageFullscreen()},enterWebpageFullscreen(){this.videoWrapper.classList.add("webpage-fullscreen"),this.isWebpageFullscreen=!0,this.showSnackbar("è¿›å…¥ç½‘é¡µå…¨å±æ¨¡å¼ (æŒ‰ ESC æˆ– F é”®é€€å‡º)","success"),this.video.paused&&this.video.play().catch((e=>console.log("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢")))},exitWebpageFullscreen(){this.videoWrapper.classList.remove("webpage-fullscreen"),this.isWebpageFullscreen=!1,this.isForcedLandscape&&this.exitForcedLandscape(),this.isForcedPortrait&&this.exitForcedPortrait(),this.showSnackbar("å·²é€€å‡ºç½‘é¡µå…¨å±æ¨¡å¼","success")},toggleNativeFullscreen(){document.fullscreenElement?this.exitNativeFullscreen():this.enterNativeFullscreen()},enterNativeFullscreen(){this.videoWrapper.requestFullscreen?this.videoWrapper.requestFullscreen():this.videoWrapper.webkitRequestFullscreen?this.videoWrapper.webkitRequestFullscreen():this.videoWrapper.msRequestFullscreen&&this.videoWrapper.msRequestFullscreen(),this.showSnackbar("è¿›å…¥åŸç”Ÿå…¨å±æ¨¡å¼ (æŒ‰ ESC é”®é€€å‡º)","success")},exitNativeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},toggleForcedLandscape(){this.isForcedLandscape?this.exitForcedLandscape():this.enterForcedLandscape()},enterForcedLandscape(){this.isForcedPortrait&&this.exitForcedPortrait(),this.videoWrapper.style.transform="translate(-50%, -50%) rotate(90deg)",this.videoWrapper.style.width="100vh",this.videoWrapper.style.height="100vw",this.videoWrapper.style.position="fixed",this.videoWrapper.style.top="50%",this.videoWrapper.style.left="50%",this.videoWrapper.style.zIndex="10000",this.isForcedLandscape=!0,this.showSnackbar("å·²å¼ºåˆ¶æ¨ªå±æ˜¾ç¤º (ç‚¹å‡»å¼ºåˆ¶ç«–å±é€€å‡º)","success")},exitForcedLandscape(){this.videoWrapper.style.transform="",this.videoWrapper.style.width="",this.videoWrapper.style.height="",this.videoWrapper.style.position="",this.videoWrapper.style.top="",this.videoWrapper.style.left="",this.videoWrapper.style.zIndex="",this.isForcedLandscape=!1,this.showSnackbar("å·²é€€å‡ºå¼ºåˆ¶æ¨ªå±æ¨¡å¼","success")},toggleForcedPortrait(){this.isForcedPortrait?this.exitForcedPortrait():this.enterForcedPortrait()},enterForcedPortrait(){this.isForcedLandscape&&this.exitForcedLandscape(),this.videoWrapper.style.maxWidth="400px",this.videoWrapper.style.margin="0 auto",this.isForcedPortrait=!0,this.showSnackbar("å·²å¼ºåˆ¶ç«–å±æ˜¾ç¤º (ç‚¹å‡»å¼ºåˆ¶æ¨ªå±é€€å‡º)","success")},exitForcedPortrait(){this.videoWrapper.style.maxWidth="",this.videoWrapper.style.margin="",this.isForcedPortrait=!1,this.showSnackbar("å·²é€€å‡ºå¼ºåˆ¶ç«–å±æ¨¡å¼","success")},adjustPlaybackRate(e){this.video.playbackRate=e,this.showSnackbar(`æ’­æ”¾é€Ÿåº¦: ${e}x`,"success")},cleanup(){this.hlsInstance&&(this.hlsInstance.destroy(),this.hlsInstance=null),this.blobUrls.forEach((e=>URL.revokeObjectURL(e))),this.blobUrls.clear(),this.video.src="",this.video.load()},showLoading(e){const t=document.getElementById("loadingOverlay");document.getElementById("loadingText").textContent=e,t.classList.remove("hidden")},hideLoading(){document.getElementById("loadingOverlay").classList.add("hidden")},showSnackbar(e,t=""){const s=document.getElementById("snackbar");s.textContent=e,s.className="snackbar "+t+" show",setTimeout((()=>{s.classList.remove("show")}),3e3)},getFileExtension(e){const t=e.split(".");return t.length>1?t[t.length-1].split("?")[0]:"video"},formatTime(e){if(isNaN(e))return"00:00";const t=Math.floor(e/3600),s=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?`${t}:${String(s).padStart(2,"0")}:${String(i).padStart(2,"0")}`:`${s}:${String(i).padStart(2,"0")}`}};window.addEventListener("load",(()=>app.init()));</span>2x</button></div></div></div><div id="snackbar" class="snackbar"></div><script></script></body></html>